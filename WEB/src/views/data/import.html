<div class="layui-fluid">
    <div class="layui-row layui-col-space15">
        <!--TableLayout
        <div class="layui-col-md12">
          <div class="layui-row layui-col-space15">
            <div class="layui-col-md3">
              <div class="layui-card">
                <div class="layui-card-body">
                  访客
                </div>
              </div>
            </div>
            <div class="layui-col-md3">
              <div class="layui-card">
                <div class="layui-card-body">
                  新用户
                </div>
              </div>
            </div>
            <div class="layui-col-md3">
              <div class="layui-card">
                <div class="layui-card-body">
                  销售额
                </div>
              </div>
            </div>
            <div class="layui-col-md3">
              <div class="layui-card">
                <div class="layui-card-body">
                  成交量
                </div>
              </div>
            </div>
          </div>
        </div>-->
        <div class="layui-col-md12">
            <div class="layui-row layui-col-space15">
                <div class="layui-col-md12">
                    <div class="layui-row layui-col-space15">
                        <fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">
                            <legend>数据导入</legend>
                        </fieldset>

                        <div class="layui-upload">
                            <button type="button" class="layui-btn layui-btn-normal" id="testList">选择多文件</button>
                            <div class="layui-upload-list">
                                <table class="layui-table">
                                    <thead>
                                    <tr><th>文件名</th>
                                        <th>大小</th>
                                        <th>状态</th>
                                        <th>操作</th>
                                    </tr></thead>
                                    <tbody id="demoList"></tbody>
                                </table>
                            </div>
                            <button type="button" class="layui-btn" id="testListAction">开始上传</button>
                        </div>
                    </div>
                    </div>
                </div>
            <div class="layui-card" data-anim="layui-anim-up">
                <div class ="layui-card-header">数据信息</div>
                <div class="layui-card-body">
                    <div class="layui-row layui-col-space15">
                        <div class="layui-col-xs6 layui-col-sm6 layui-col-md8">
                            <form class="layui-form" action="">
                                <div class="layui-form-item">
                                    <label class="layui-form-label">表名</label>
                                    <div class="layui-input-block">
                                        <input type="text" name="title" lay-verify="title" autocomplete="off" placeholder="请输入表名" class="layui-input">
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">坐标选择</label>
                                    <div class="layui-input-block">
                                        <select id="xy" lay-verify="required">
                                            <option value=""></option>
                                            <option value="0">北京54</option>
                                            <option value="1">WGS84</option>
                                            <option value="2">西安84</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <div class="layui-input-block">
                                        <button class="layui-btn" lay-submit="" lay-filter="checkForm">立即提交</button>
                                        <button type="reset" class="layui-btn layui-btn-primary">重置</button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>

                </div>
            </div>
                <!--Card
                <div class="layui-card">
                  <div class="layui-card-header">快捷入口</div>
                  <div class="layui-card-body">
                    <div class="layui-row layui-col-space5">
                      <div class="layui-col-sm3">
                          <div style="height:75px;  background-color:#ccc;"></div>
                        </div>
                        <div class="layui-col-sm3">
                          <div style="height:75px;  background-color:#ccc;"></div>
                        </div>
                        <div class="layui-col-sm3">
                          <div style="height:75px;  background-color:#ccc;"></div>
                        </div>
                        <div class="layui-col-sm3">
                          <div style="height:75px;  background-color:#ccc;"></div>
                        </div>
                        <div class="layui-col-sm3">
                          <div style="height:75px;  background-color:#ccc;"></div>
                        </div>
                        <div class="layui-col-sm3">
                          <div style="height:75px;  background-color:#ccc;"></div>
                        </div>
                        <div class="layui-col-sm3">
                          <div style="height:75px;  background-color:#ccc;"></div>
                        </div>
                        <div class="layui-col-sm3">
                          <div style="height:75px;  background-color:#ccc;"></div>
                        </div>
                      <div class="layui-col-xs6 layui-col-sm6 layui-col-md4">
                        <div style="height:75px;  background-color:#ccc;"></div>
                      </div>
                      <div class="layui-col-xs6 layui-col-sm6 layui-col-md4">
                        <div style="height:75px;  background-color:#ccc;"></div>
                      </div>
                      <div class="layui-col-xs4 layui-col-sm12 layui-col-md4">
                        <div style="height:75px;  background-color:#ccc;"></div>
                      </div>
                      <div class="layui-col-xs4 layui-col-sm7 layui-col-md8">
                        <div style="height:75px;  background-color:#ccc;"></div>
                      </div>
                      <div class="layui-col-xs4 layui-col-sm5 layui-col-md4">
                        <div style="height:75px;  background-color:#ccc;"></div>
                      </div>
                    </div>
                  </div>
                </div>-->
                <!--表单信息
                <div class="layui-col-md12">
                  <div class="layui-card">
                    <div class="layui-card-header">版本信息</div>
                    <div class="layui-card-body">
                      <table class="layui-table">
                        <colgroup>
                          <col width="150">
                          <col>
                        </colgroup>
                        <tbody>
                          <tr>
                            <td>版本号</td>
                            <td>v2.0.0-beta1</td>
                          </tr>
                          <tr>
                            <td>依赖</td>
                            <td>layui v2.2.5</td>
                          </tr>
                          <tr>
                            <td>作者</td>
                            <td>Van Zheng</td>
                          </tr>
                          <tr>
                            <td>邮箱</td>
                            <td>zheng_jinfan@126.com</td>
                          </tr>
                          <tr>
                            <td>交流群</td>
                            <td>248049395</td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
                <div class="layui-col-md12">
                  <div class="layui-card">
                    <div class="layui-card-header">关于KITADMIN 2.0</div>
                    <div class="layui-card-body">
                      <p>当前版本是基于layui 2.x重构的版本，与之后1.x版本有本质有区别。</p>
                      <p>该版本的核心是[路由]，不再支持[iframe]方式的加载</p>
                      <p>版本特性：</p>
                      <ul>
                        <li>1、用法一如既往的简单，快捷。(只需要简单的配置就实现一些功能).</li>
                        <li>2、提供本地开发环境。(依赖nodejs运行环境和gulp)</li>
                        <li>3、提供代码功能。(依赖nodejs运行环境和gulp)</li>
                        <li>4、模块化加载。(依赖layui模块化，用法与layui保持一致)</li>
                        <li>5、提供路由功能。(路由是本版本的核心功能了，需与模板绑定，详情请参考相关文档)</li>
                        <li>6、完全的前后端分离开发。(集成mockjs用于拦截请求并返回模拟数据，详情请参考相关文档)</li>
                        <li>7、左侧菜单重写，支持到4级菜单。(集成mockjs用于拦截请求并返回模拟数据，详情请参考相关文档)</li>
                      </ul>
                    </div>
                  </div>
                </div>-->

            </div>
        </div>
    </div>
</div>
<script>
    layui.use(['upload','form'], function() {
        var $ = layui.jquery,
            upload = layui.upload,
            form = layui.form;
        //多文件列表示例
        form.render('select');
        var demoListView = $('#demoList')
            ,uploadListIns = upload.render({
            elem: '#testList'
            ,url: '/upload/'
            ,accept: 'file'
            ,multiple: true
            ,auto: false
            ,bindAction: '#testListAction'
            ,choose: function(obj){
                var files = this.files = obj.pushFile(); //将每次选择的文件追加到文件队列
                //读取本地文件
                obj.preview(function(index, file, result){
                    var tr = $(['<tr id="upload-'+ index +'">'
                        ,'<td>'+ file.name +'</td>'
                        ,'<td>'+ (file.size/1014).toFixed(1) +'kb</td>'
                        ,'<td>等待上传</td>'
                        ,'<td>'
                        ,'<button class="layui-btn layui-btn-xs demo-reload layui-hide">重传</button>'
                        ,'<button class="layui-btn layui-btn-xs layui-btn-danger demo-delete">删除</button>'
                        ,'</td>'
                        ,'</tr>'].join(''));

                    //单个重传
                    tr.find('.demo-reload').on('click', function(){
                        obj.upload(index, file);
                    });

                    //删除
                    tr.find('.demo-delete').on('click', function(){
                        delete files[index]; //删除对应的文件
                        tr.remove();
                        uploadListIns.config.elem.next()[0].value = ''; //清空 input file 值，以免删除后出现同名文件不可选
                    });

                    demoListView.append(tr);
                });
            }
            ,done: function(res, index, upload){
                if(res.code == 0){ //上传成功
                    var tr = demoListView.find('tr#upload-'+ index)
                        ,tds = tr.children();
                    tds.eq(2).html('<span style="color: #5FB878;">上传成功</span>');
                    tds.eq(3).html(''); //清空操作
                    return delete this.files[index]; //删除文件队列已经上传成功的文件
                }
                this.error(index, upload);
            }
            ,error: function(index, upload){
                var tr = demoListView.find('tr#upload-'+ index)
                    ,tds = tr.children();
                tds.eq(2).html('<span style="color: #FF5722;">上传失败</span>');
                tds.eq(3).find('.demo-reload').removeClass('layui-hide'); //显示重传
            }
        });
        form.on('submit(checkForm)', function(data) {
            layer.msg('开始ajax', {time: 2000});
            $.ajax({
                url: "/tables/add",
                data: JSON.stringify(data.field),
                type: "POST",
                dataType: "json",
                success: function (result) {
                    if (result.code == 0) {
                        layer.msg('提交成功', {icon: 1});
                    } else {
                        layer.msg("提交失败", {icon: 5});
                    }
                }
            })
            return false;
        })

    });

</script>
<style scoped>
</style>